"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[522],{"1618":function(e){e.exports=function(){function m(e){var n=[];return e.AMapUI&&n.push(p(e.AMapUI)),e.Loca&&n.push(r(e.Loca)),Promise.all(n)}function p(n){return new Promise((function(c,s){var l=[];if(n.plugins)for(var A=0;A<n.plugins.length;A+=1)-1==o.AMapUI.plugins.indexOf(n.plugins[A])&&l.push(n.plugins[A]);if(a.AMapUI===e.failed)s("前次请求 AMapUI 失败");else if(a.AMapUI===e.notload){a.AMapUI=e.loading,o.AMapUI.version=n.version||o.AMapUI.version,A=o.AMapUI.version;var u=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+A+"/main.js",d.onerror=function(n){a.AMapUI=e.failed,s("请求 AMapUI 失败")},d.onload=function(){if(a.AMapUI=e.loaded,l.length)window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}for(c();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(c();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},u.appendChild(d)}else a.AMapUI===e.loaded?n.version&&n.version!==o.AMapUI.version?s("不允许多个版本 AMapUI 混用"):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}c()})):c():n.version&&n.version!==o.AMapUI.version?s("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?s(e):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}c()})):c()}))}))}function r(n){return new Promise((function(c,s){if(a.Loca===e.failed)s("前次请求 Loca 失败");else if(a.Loca===e.notload){a.Loca=e.loading,o.Loca.version=n.version||o.Loca.version;var l=o.Loca.version,A=o.AMap.version.startsWith("2"),u=l.startsWith("2");if(A&&!u||!A&&u)s("JSAPI 与 Loca 版本不对应！！");else{A=o.key,u=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+l+"&key="+A,d.onerror=function(n){a.Loca=e.failed,s("请求 AMapUI 失败")},d.onload=function(){for(a.Loca=e.loaded,c();i.Loca.length;)i.Loca.splice(0,1)[0]()},u.appendChild(d)}}else a.Loca===e.loaded?n.version&&n.version!==o.Loca.version?s("不允许多个版本 Loca 混用"):c():n.version&&n.version!==o.Loca.version?s("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?s(e):s()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e,n;(n=e||(e={})).notload="notload",n.loading="loading",n.loaded="loaded",n.failed="failed";var o={"key":"","AMap":{"version":"1.4.15","plugins":[]},"AMapUI":{"version":"1.1","plugins":[]},"Loca":{"version":"1.3.2"}},a={"AMap":e.notload,"AMapUI":e.notload,"Loca":e.notload},i={"AMap":[],"AMapUI":[],"Loca":[]},c=[],t=function(n){"function"==typeof n&&(a.AMap===e.loaded?n(window.AMap):c.push(n))};return{"load":function(n){return new Promise((function(i,s){if(a.AMap==e.failed)s("");else if(a.AMap==e.notload){var l=n.key,A=n.version,u=n.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&s("禁止多种API加载方式混用"),o.key=l,o.AMap.version=A||o.AMap.version,o.AMap.plugins=u||o.AMap.plugins,a.AMap=e.loading,A=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)a.AMap=e.failed,s(o);else for(a.AMap=e.loaded,m(n).then((function(){i(window.AMap)})).catch(s);c.length;)c.splice(0,1)[0]()},(u=document.createElement("script")).type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+l+"&plugin="+o.AMap.plugins.join(","),u.onerror=function(n){a.AMap=e.failed,s(n)},A.appendChild(u)):s("请填写key")}else if(a.AMap==e.loaded)if(n.key&&n.key!==o.key)s("多个不一致的 key");else if(n.version&&n.version!==o.AMap.version)s("不允许多个版本 JSAPI 混用");else{if(l=[],n.plugins)for(A=0;A<n.plugins.length;A+=1)-1==o.AMap.plugins.indexOf(n.plugins[A])&&l.push(n.plugins[A]);l.length?window.AMap.plugin(l,(function(){m(n).then((function(){i(window.AMap)})).catch(s)})):m(n).then((function(){i(window.AMap)})).catch(s)}else if(n.key&&n.key!==o.key)s("多个不一致的 key");else if(n.version&&n.version!==o.AMap.version)s("不允许多个版本 JSAPI 混用");else{var d=[];if(n.plugins)for(A=0;A<n.plugins.length;A+=1)-1==o.AMap.plugins.indexOf(n.plugins[A])&&d.push(n.plugins[A]);t((function(){d.length?window.AMap.plugin(d,(function(){m(n).then((function(){i(window.AMap)})).catch(s)})):m(n).then((function(){i(window.AMap)})).catch(s)}))}}))},"reset":function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={"key":"","AMap":{"version":"1.4.15","plugins":[]},"AMapUI":{"version":"1.1","plugins":[]},"Loca":{"version":"1.3.2"}},a={"AMap":e.notload,"AMapUI":e.notload,"Loca":e.notload},i={"AMap":[],"AMapUI":[],"Loca":[]}}}}()},"991":function(e,n,o){o.d(n,{"D":function(){return E}});var a=o(3366),i=o(9748),c=o(1618),s=o(8311),l=["children"],APILoader=e=>{var{"children":n}=e,o=(0,a.Z)(e,l),[A,u]=(0,i.useState)(!1),[d,f]=(0,i.useState)();return(0,i.useEffect)((()=>{var e=o.akey||"",n=o.plugins;(0,c.load)({"key":e,"plugins":n,"version":o.version||"2.0","AMapUI":o.AMapUI,"Loca":o.Loca}).then((()=>{f(void 0),u(!0)})).catch((e=>{f(e)}))}),[o.akey]),d?(0,s.tZ)("div",{"style":{"color":"red"},"children":d.message}):A?(0,s.tZ)(i.Fragment,{"children":n}):null},A=o(7462);function esm_useEventProperties(e,n,o,a){void 0===n&&(n={}),void 0===o&&(o=[]),o.forEach((o=>{var a=n[o];(0,i.useEffect)((()=>{if(e){var n=o.toLocaleLowerCase().replace(/^on/,"");return a&&n&&e.on(n,a),()=>{n&&a&&e.off(n,a)}}}),[e,a])}))}function esm_useSettingProperties(e,n,o){void 0===e&&(e={}),void 0===n&&(n={}),void 0===o&&(o=[]),o.forEach((o=>{var a="set"+o,c=""+o.charAt(0).toLowerCase()+o.slice(1),s=n[c],[l,A]=(0,i.useState)(s);(0,i.useEffect)((()=>{e&&void 0!==s&&s!==l&&e[a]&&"function"==typeof e[a]&&(e[a](s),A(s))}),[e,s])}))}var u={"map":void 0,"AMap":void 0,"container":void 0},context_reducer=(e,n)=>(0,A.Z)({},e,n),d=i.default.createContext({"state":u,"dispatch":()=>null});function context_useMapContext(){var{"state":e,"dispatch":n}=(0,i.useContext)(d);return(0,A.Z)({},e,{"state":e,"dispatch":n})}var f=function useMap(e){void 0===e&&(e={});var n=(0,A.Z)({},(function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[o,a]=(0,i.useState)(),[c,s]=(0,i.useState)(e.zoom||15),[l,u]=(0,i.useState)(e.container),{"dispatch":f}=(0,i.useContext)(d);return(0,i.useEffect)((()=>{if(l&&!o&&AMap){l.className=l.className+" react-amap-wapper";var e=new AMap.Map(l,(0,A.Z)({"zoom":c},n));a(e)}return()=>{o&&(o.clearInfoWindow(),o.clearLimitBounds(),o.clearMap(),o.destroy(),a(void 0))}}),[l,o]),(0,i.useEffect)((()=>(o&&l&&f({"map":o,"container":l,"AMap":AMap}),()=>{f({"map":void 0,"container":void 0,"AMap":void 0})})),[o,l]),(0,i.useMemo)((()=>{o&&"number"==typeof e.zoom&&c!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(s(e.zoom),o.setZoom(e.zoom))}),[c,e.zoom]),(0,i.useMemo)((()=>{e.center&&o&&o.setCenter(e.center)}),[o,e.center]),function useSetStatus(e,n,o){void 0===n&&(n={}),void 0===o&&(o=[]),o.forEach((o=>{var a=o,[c,s]=(0,i.useState)(n[a]);(0,i.useEffect)((()=>{if(e&&void 0!==n[a]&&n[a]!==c){var o=e.getStatus();e.setStatus((0,A.Z)({},o,{[a]:n[a]})),s(n[a])}}),[e,n[a]])}))}(o,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),esm_useSettingProperties(o,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),esm_useEventProperties(o,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{"map":o,"setMap":a,"zoom":c,"setZoom":s,"container":l,"setContainer":u}},g=["className","children"],v=(0,i.forwardRef)(((e,n)=>{var{"className":o,"children":c}=e,l=(0,a.Z)(e,g),v=window.AMap,[h,M]=(0,i.useReducer)(context_reducer,u),Z=(0,i.useRef)(null),{"setContainer":w,"container":y,"map":C}=f((0,A.Z)({"container":l.container||Z.current},l));return(0,i.useEffect)((()=>w(Z.current)),[Z.current]),(0,i.useImperativeHandle)(n,(()=>(0,A.Z)({},l,{"map":C,"AMap":v,"container":l.container||Z.current})),[C]),(0,i.useEffect)((()=>{C&&M({"map":C,"container":Z.current,"AMap":v})}),[C]),(0,s.BX)(d.Provider,{"value":(0,A.Z)({},h,{"state":h,"dispatch":M}),"children":[!l.container&&(0,s.tZ)("div",{"ref":Z,"className":o,"style":(0,A.Z)({"fontSize":1,"width":"100%","height":"100%"},l.style)}),v&&C&&"function"==typeof c&&c({"AMap":v,"map":C,"container":y}),v&&C&&"function"!=typeof c&&c]})})),h=["position"],M=function noop(){},Z=i.default.forwardRef(((e,n)=>{var{"contextMenu":o}=function useContextMenu(e){void 0===e&&(e={});var{"position":n}=e,o=(0,a.Z)(e,h),{"map":c}=context_useMapContext(),[s,l]=(0,i.useState)();return(0,i.useEffect)((()=>{if(AMap&&c&&!s){var e=new AMap.ContextMenu((0,A.Z)({},o));l(e);var rightclick=o=>e.open(c,n||o.lnglat);return c.on("rightclick",rightclick),()=>{e&&(e.close(),c.off("rightclick",rightclick),l(void 0))}}}),[c]),esm_useEventProperties(s,e,["onOpen","onClose"]),{"contextMenu":s,"setContextMenu":l}}(e);(0,i.useImperativeHandle)(n,(()=>(0,A.Z)({},e,{"contextMenu":o})));var c=i.default.Children.toArray(e.children);return(0,s.tZ)(i.Fragment,{"children":AMap&&o&&c.map(((n,a)=>i.default.isValidElement(n)?i.default.cloneElement(n,(0,A.Z)({},n.props,{"AMap":AMap,"map":e.map,"contextMenu":o,"key":a})):null))})}));console.log("ContextMenuCompound:",Z),Z.Item=function(e){void 0===e&&(e={});var{"text":n="","onClick":o=M}=e;return(0,i.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(n,o,1),()=>{e.contextMenu&&e.contextMenu.removeItem(n,o)})),[e.contextMenu,e.text,e.onClick]),null};var w=["visiable","children"],y=function useMarker(e){void 0===e&&(e={});var{"visiable":n}=e,o=(0,a.Z)(e,w),{"map":c}=context_useMapContext(),[s,l]=(0,i.useState)(),{"container":u,"Portal":d}=(()=>{var[e]=i.default.useState((()=>document.createElement("div"))),[n,o]=(0,i.useState)({"render":()=>null,"remove":()=>null}),a=i.default.useCallback((e=>({"render":n=>{var{"children":o}=n;return o?(0,i.createPortal)(o,e):null},"remove":e=>{e&&(0,i.unmountComponentAtNode)(e)}})),[]);return(0,i.useEffect)((()=>{e&&n.remove();var i=a(e);return o(i),()=>{i.remove(e)}}),[e]),{"Portal":n.render,"container":e}})();return(0,i.useLayoutEffect)((()=>{if(c&&!s){e.children&&(o.content=u);var n=new AMap.Marker((0,A.Z)({},o));return c.add(n),l(n),()=>{n&&(n.setMap(null),l(void 0))}}}),[c]),function esm_useVisiable(e,n){var[o,a]=(0,i.useState)(n);(0,i.useEffect)((()=>{e&&void 0!==n&&(n?e.show&&e.show():e.hide&&e.hide(),n!==o&&a(n))}),[e,n])}(s,n),esm_useSettingProperties(s,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),esm_useEventProperties(s,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{"marker":s,"setMarker":l,"MarkerPortal":d}},C=(0,i.forwardRef)(((e,n)=>{var{"marker":o,"MarkerPortal":a}=y(e);return(0,i.useImperativeHandle)(n,(()=>(0,A.Z)({},e,{"marker":o})),[o]),(0,s.tZ)(a,{"children":e.children})}));var k=o(2504),E=function Map(e){var n=e.onMoveEnd,o=e.center,a=e.zoom,c=void 0===a?18:a,l=e.markers,A=(0,i.useRef)(),u=(0,i.useCallback)((function(){var e=A.current.map.getCenter();null==n||n({"center":[e.lng,e.lat]})}),[n]);return(0,s.tZ)(APILoader,{"akey":k.Bn.h5Key,"children":(0,s.tZ)(v,{"ref":A,"center":o,"zoom":c,"onDragEnd":u,"onZoomEnd":u,"onComplete":u,"style":{"position":"absolute","top":0,"bottom":0,"right":0,"left":0},"children":null==l?void 0:l.map((function(e){return(0,s.tZ)(C,{"position":[e.lng,e.lat]},""+e.lng+e.lat)}))})})}},"522":function(e,n,o){o.r(n),o.d(n,{"default":function(){return Location}});var a=o(1413),i=o(9439),c=o(8074),s=o(2953),l=o(991),A=o(2504),u=o(9748),d=o(7690),f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAeFBMVEUAAAASldkSltwSltwSltsRltsSltwSltoRl9wRltsRltsRltsRltsRltwPl9gQkt0SltsSltwSldoSldwRldkSmNsXi90AqtQSltsSltsSltsSl9sSltwSl9sTltkVldwSltsRldsSltwRltsSltsSl9oUlNsSltvmn1AtAAAAJ3RSTlMAgOa3889t2KC+k4dlWyEQpYpEGisVCwbsx3g42qtQJPnq36+sUzIzqlpDAAABUUlEQVRYw+3Y6YqDMBSG4ZNEY2rVurfVLrPn/u9wfgwMhY495zNQGMh7AQ8J2URi62z+cXx7OaTGbVsK7Wva+Nte889dANe++/v0tJaca/93mV3lbf1yaYt7zj9sQj3jmRzmbTybQbzGC1Jyr/CiCqlXemGlzKu0FNQVtgH5thKvT+Rg0hNf7oFy3rt6qCsLWgy04JkLPy+jBxuxTR2+uRsUbBiwRsGavbfANgyYoWDGgAkKJs8G8Sk/e1EcCjrsdg2/Y1sUbIkpCVrk8LNXo29y+NvcacTTHbEpBFTE1+mAAYYOUZGkXSr10h2JukjBCwnL0c8GftLYhPmqI+8dKwIaDOeZgaDG82PvPBJakS1zWUErGpolrxloXb063Wsn1dP69qU53GoHU+4psP1s3Y/m7Mxo4tTvTRDBCEYwghGMYAQj+P/BSjP/R+FsmloS9Q2LyDcQCgsAggAAAABJRU5ErkJggg==",g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAllBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6C80qAAAAMXRSTlMAyXkjZ+Z/Wic1G0G2s46HGAirXTov9tO8rm8R7+nZ1KOdR8ynllAgDUsq3t2Dw7+JzjlvgwAAAjhJREFUWMPtldmamkAQRmUVFRxcwH3XcZwlyXn/lwuY+eyCz4LB3CVz7pqmumv9u/XNv87rpe3attu+vD5i3fvYcGPz0WtoPrIoYY0amD9PyUnffxz7/WiTcmX6/FX7HTnb/e1Dx/5z4u5L5t01MJl3i187JzLW3Xr7ztXb852NIxmd2vuv3t/fuzpR48PLBBiptcmDe6k8YAZUJLsNzKrsXcCu+sEG3Ir9A0TVMQ7hUO1AqWcdp7ReVblgQV8s41/hEryZL//pg6XZJ7AUVbp4fDIR1R8DiZohmWKfnPWaHOFEqOfZkuE5ZNiZQ12bDMc0gxrDAIjlRYyN1+FtIwAG0k7ueCYAeWu3EMQSgrsH7OHnbRHBXAgERDLSvdIFYuBXcBbqCKvbYguuVoQnEc67nDGE209ga7M2FDVYywNkRobavPZkm3uFyU9kfg/lfhe3LuVc20qLLcFR+yCQZRzL9vXVPlCadGLCdoCJ9CbU9cYqius8WSySeVFMLWgrByxS+aOPwJcHp4uWwhaGIqkhn4ROQZK2+oNaUjw/WsEq8qtFqyQ3XrFEQVAstZeLls5iA8MaTd2YDCjCP9W3p6glEJOCpYuumTeVE2Dp9iex1hPJ272NN0QC656vNC5/jVPl2VMyWdb+BJO/esaU26WHnM56YnOf8SluNcFDyPIc8Oos9JrrvVHNEdgNMqHaAcdmtubi6HyOjCtNcQHLMiPenD1X9q2HCTBK/RgDzxu0/oo4bn3zH/Ab9XpfVKuYq5UAAAAASUVORK5CYII=",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAJ1BMVEUAAABQUFBQUFBQUFBRUVFRUVFRUVFRUVFQUFBRUVFQUFBRUVFRUVFQ1WB1AAAADHRSTlMAgHJreGXUX1fMXL+ykmzbAAAAuUlEQVRIx2MYBSMFiG3EL8945hh+BTIEFLCcOXMQrwKfM2cEaGoAEyEDdEgzQGwiAQP2oBvHjOaCOWeOoCqwgRqACNQzDugGoEXLmUOYBqAZoYDgsYINwGNEDNgADCMMUA3ANOIwqgG4jWCHGoBpxFEIqwZmAKYRAQgDsBtxHESvQRiAaUQBAwMX2ABcRpxiYOgBG4DTiAYOsAG4jTgBMQCPEWAD8BlBICXKEErKjLgNQKTeUTAKaAoAAORnr1D6mLkAAAAASUVORK5CYII=",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAeFBMVEUAAACbm5uXl5eZmZmZmZmZmZmYmJiampqZmZmZmZmampqYmJiZmZmYmJiampqampqUlJSZmZmZmZmZmZmZmZmZmZmZmZmampqampqZmZmZmZmZmZmYmJiZmZmdnZ2ampqXl5eZmZmXl5eZmZmampqZmZmYmJiZmZlEwnXQAAAAJ3RSTlMAF4BzbjQgwbOikWBFzVskBfnZx5qJU0zl4ruoZmQN00AuE+xrrXzGzGVaAAAB5UlEQVRYw+2Wy5qiMBCFi7sICCioqODd8/5vOJh83cwwKSqy6kX/S4qEk7qcQL/8ZJx023qun2zTYsbq3IvwTRlvO/qI3QIj7lUwc/mA9RZHaDZucgkp3/lxA039wfpFEtLA1V/rpyRzVh9f/VeSJd6sSQJvPFMkzVRMWK9Om5pjnSrsgabYoMdhw+oYS+J5oicnmt7B5euPHl8s0Z6V+O6flzAfZyWBF7AhgURJ4AWsSOLASgjtOm0LIDNG2kGA2KoBp80hmYqZqhuAiCxYMSORGpPDfAmFOTkJ2bBXZzXm8EI2ROZ+9wCEZENsLoM7zLqAa9bqf6Tgam7ylGS0aYTmKpzIhjuAm7kPlmRBzvRBUQJnEtHJioTciKbkcXPqk0zDlau7A+eCJB68tVdKm0C35qsV9KFGcoSXNiReQkyTBKUWwEmQeqFrlACWGoIvZtILC/TsuGixhpjnqVd2d/Qcbf4PYlNHeqWKWd08KOtwPGsRIF99wxWOfbXqhgE8HYGvEt2Sp59PW9Yemih2k0tbPxtoskT3sniFOWqLMdnp25R7WhK2yEbLF6e/Hc1mcIN6jS8ObfivoehiixROHlyu4a0YO4/mRXOpoCiFyRUrjQfNpsablObjltqa5+M8AvrlB/EHlpFSNuynd3UAAAAASUVORK5CYII=",M=o(8311);function Location(){var e=(0,s.yj)().params,n=(0,u.useState)([]),o=(0,i.Z)(n,2),Z=o[0],w=o[1],y=(0,u.useState)(!1),C=(0,i.Z)(y,2),k=C[0],E=C[1],b=(0,u.useState)(void 0),_=(0,i.Z)(b,2),U=_[0],S=_[1],I=(0,u.useState)(!1),L=(0,i.Z)(I,2),R=L[0],x=L[1],B=(0,u.useState)([]),N=(0,i.Z)(B,2),q=N[0],O=N[1],P=(0,u.useState)({}),G=(0,i.Z)(P,2),Y=G[0],z=G[1],D=(0,u.useState)({"city":"","longitude":0,"latitude":0}),V=(0,i.Z)(D,1)[0];(0,u.useEffect)((function(){e.lat&&e.lng?S([+e.lng,+e.lat]):(0,s.Y6)().then((function(e){S([e.longitude,e.latitude])})).catch((function(e){console.log(e)}))}),[e.lat,e.lng]),(0,u.useEffect)((function(){U&&(x(!0),z({}),A.qr.getAround(U[0],U[1]).then((function(e){O(e),x(!1)})).catch((function(e){console.log("err",e),x(!1),(0,s.Am)(e.message||"信息获取失败")})))}),[U]);var Q=(0,u.useCallback)((function(e){var n=function(){for(var e=[],n=1;n<=19;n++)e.push((n<10?"0"+n:n)+"0000");return e.join("|")}();E(!0),A.qr.request("place/text",{"keywords":e.target.value,"city":V.city,"location":"".concat(V.longitude,",").concat(V.latitude),"extensions":"all","offset":25,"types":n,"citylimit":!0}).then((function(e){1==e.status?w(e.pois.map((function(e){return e.distance=Number(e.distance),e}))):(w([]),(0,s.Am)(e.info||"信息获取失败"))}))}),[V.city,V.latitude,V.longitude]),X=(0,u.useCallback)((function(e){var n=e.center;z({}),x(!0),A.qr.getAround(n[0],n[1]).then((function(e){O(e),x(!1)})).catch((function(e){console.log("err",e),x(!1),(0,s.Am)(e.message||"信息获取失败")}))}),[]),F=(0,u.useCallback)((function(){(0,s.Y6)().then((function(e){S([e.longitude,e.latitude])})).catch((function(e){console.log("错误信息",e),(0,s.Am)("获取位置失败")}))}),[]),J=(0,u.useCallback)((function(){Y.status=!0,(0,s.$n)("back:",Y)}),[Y]),K=(0,u.useCallback)((function(e,n){if("around"===n)z((0,a.Z)({"select":!0},e));else{E(!1),w([]);var o=e.location.split(",").map((function(e){return Number(e)}));S(o)}}),[]);return(0,M.BX)(s.sr,{"children":[(0,M.tZ)(s.h4,{"renderHeader":(0,M.BX)(c.G7,{"className":"get-location__header","children":[(0,M.tZ)(s.h4.Back,{}),(0,M.BX)(c.G7,{"className":"get-location__header__input","children":[(0,M.tZ)(c.Ee,{"className":"get-location__header__search","src":h,"onClick":function onClick(){return(0,s.$n)("back:")}}),(0,M.tZ)(c.II,{"className":"get-location__header__inputs","focus":e.disableAutoLocation,"type":"text","onInput":Q,"placeholder":"请输入关键词 搜索地址"})]})]})}),(0,M.BX)(s.R6,{"children":[(0,M.BX)(c.G7,{"className":"get-location__main","children":[(0,M.tZ)(l.D,{"center":U,"onMoveEnd":X}),(0,M.tZ)(c.Ee,{"className":"get-location__point","src":f})]}),(0,M.BX)(c.G7,{"className":"get-location","children":[(0,M.tZ)(c.G7,{"className":"get-location__my-position","onClick":F,"children":(0,M.tZ)(c.Ee,{"className":"get-location__my-position__img","src":g})}),(0,M.tZ)(s.pf,{"style":{"width":(0,d.uk)(750)},"children":(0,M.tZ)(c.G7,{"className":"get-location__top","children":R?(0,M.tZ)(c.G7,{"className":"get-location__top__loading","children":(0,M.tZ)(s.gb,{"size":46})}):q.map((function(e,n){return(0,M.BX)(c.G7,{"className":"get-location__top__rig","onClick":function onClick(){return K((0,a.Z)({"index":n},e),"around")},"children":[(0,M.BX)(c.G7,{"children":[(0,M.tZ)(c.xv,{"className":"get-location__top__rig__big","numberOfLine":2,"children":e.addname}),(0,M.BX)(c.xv,{"className":"get-location__top__rig__adres","numberOfLine":1,"children":[e.province,e.city,e.district,e.township,e.address]})]}),n===Y.index&&(0,M.tZ)(c.Ee,{"className":"get-location__top__rig__select","src":v})]},n)}))})}),(0,M.tZ)(c.G7,{"className":"get-location__bottom","children":(0,M.tZ)(c.G7,{"className":"get-location__bottom__btn","style":{"backgroundColor":Y.select?s.Qk.primaryColor:(0,s.O)(s.Qk.primaryColor,.5)},"onClick":function onClick(){return Y.select?J():(0,s.Am)("请选择地址")},"children":(0,M.tZ)(c.xv,{"style":{"color":"#fff"},"children":"确定"})})})]}),k&&Z.length>0&&(0,M.tZ)(c.G7,{"className":"get-location__mapList","children":(0,M.tZ)(s.pf,{"children":Z.map((function(e,n){return(0,M.tZ)(c.G7,{"className":"get-location__mapList__item","onClick":function onClick(){return K(e)},"children":(0,M.BX)(c.G7,{"className":"get-location__mapList__main","children":[(0,M.tZ)(c.xv,{"className":"get-location__mapList__title","numberOfLines":1,"children":e.name}),(0,M.tZ)(c.xv,{"className":"get-location__mapList__address","numberOfLines":2,"children":e.address})]})},"item"+n)}))})})]})]})}},"2504":function(e,n,o){o.d(n,{"qr":function(){return h},"Bn":function(){return v}});var a,i,c,s,l,A=o(2953),u=o(4165),d=o(1413),f=o(5861),g=o(3099),v=(0,d.Z)({"appKeyAndroid":"","appKeyIos":"","h5Key":"","apiKey":""},A.x8.option.amap),h={"request":(l=(0,f.Z)((0,u.Z)().mark((function _callee(e,n){var o;return(0,u.Z)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.WY)({"url":"https://restapi.amap.com/v3/"+e,"data":(0,d.Z)({"key":v.apiKey},n)});case 2:if(200!==(o=a.sent).statusCode||"1"!==o.data.status){a.next=7;break}return a.abrupt("return",o.data);case 7:throw console.log(o.data),o.data;case 9:case"end":return a.stop()}}),_callee)}))),function request(e,n){return l.apply(this,arguments)}),"getGeocode":(s=(0,f.Z)((0,u.Z)().mark((function _callee2(e){var n,o;return(0,u.Z)().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.request("geocode/geo",{"address":e});case 2:return n=a.sent,o=n.geocodes[0],a.abrupt("return",{"province":o.province,"city":o.city,"code":o.adcode,"longitude":Number(o.location.split(",")[0]),"latitude":Number(o.location.split(",")[1])});case 5:case"end":return a.stop()}}),_callee2)}))),function getGeocode(e){return s.apply(this,arguments)}),"getRegeo":(c=(0,f.Z)((0,u.Z)().mark((function _callee3(e,n){var o,a,i,c,s,l,A,f=arguments;return(0,u.Z)().wrap((function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return o=f.length>2&&void 0!==f[2]&&f[2],u.next=3,h.request("geocode/regeo",{"location":e+","+n,"extensions":"all","radius":100,"roadlevel":0});case 3:return a=u.sent,i=a.regeocode.addressComponent,c=a.regeocode.formatted_address,s="".concat(i.province).concat(i.city).concat(i.district).concat(i.township),l=a.regeocode.pois.map((function(e){return{"distance":Number(e.distance),"name":e.name}})).sort((function(e,n){return e.distance-n.distance}))[0],A=(0,d.Z)((0,d.Z)({},i),{},{"code":i.adcode,"addname":c.substr(c.indexOf(s)+s.length)||c,"longitude":e,"latitude":n}),o&&l&&Number(l.distance)<=100&&(A.addname=l.name),u.abrupt("return",A);case 11:case"end":return u.stop()}}),_callee3)}))),function getRegeo(e,n){return c.apply(this,arguments)}),"getPoi":(i=(0,f.Z)((0,u.Z)().mark((function _callee4(e,n){var o,a,i,c;return(0,u.Z)().wrap((function _callee4$(s){for(;;)switch(s.prev=s.next){case 0:return o=function(){for(var e=[],n=1;n<=15;n++)e.push((n<10?"0"+n:n)+"0000");return e.join("|")}(),s.next=3,h.request("place/around",{"location":e+","+n,"radius":100,"types":o});case 3:if(a=s.sent,i=a.pois[0]){s.next=7;break}return s.abrupt("return",h.getRegeo(e,n));case 7:return c=i.location.split(",").map((function(e){return Number(e)})),s.abrupt("return",{"adcode":i.adcode,"address":i.address,"addname":i.name,"city":i.cityname,"citycode":i.citycode,"code":i.pcode,"country":"中国","district":i.adname,"latitude":c[1],"longitude":c[0],"province":i.pname,"towncode":i.gridcode,"township":""});case 9:case"end":return s.stop()}}),_callee4)}))),function getPoi(e,n){return i.apply(this,arguments)}),"getAround":(a=(0,f.Z)((0,u.Z)().mark((function _callee5(e,n){var o,a,i,c,s,l,d,f,g,v,M;return(0,u.Z)().wrap((function _callee5$(u){for(;;)switch(u.prev=u.next){case 0:if(a=n,(o=e)&&a){u.next=10;break}return u.next=5,(0,A.Y6)();case 5:i=u.sent,c=i.latitude,s=i.longitude,o=c,a=s;case 10:return l=function(){for(var e=[],n=1;n<=15;n++)e.push((n<10?"0"+n:n)+"0000");return e.join("|")}(),u.next=13,h.request("place/around",{"location":a+","+o,"radius":300,"types":l});case 13:for(d=u.sent,f=[],g=0;g<d.pois.length;g++)v=d.pois[g],M=v.location.split(","),f.push({"latitude":M[1],"longitude":M[0],"adcode":v.adcode,"address":v.address,"addname":v.name,"city":v.cityname,"citycode":v.citycode,"code":v.pcode,"country":"中国","district":v.adname,"province":v.pname,"towncode":v.gridcode,"township":""});return u.abrupt("return",f);case 17:case"end":return u.stop()}}),_callee5)}))),function getAround(e,n){return a.apply(this,arguments)})}}}]);