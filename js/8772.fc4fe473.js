"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[8772],{"8772":function(e,t,n){n.r(t),n.d(t,{"default":function(){return LoadingExample}});var r=n(9439),o=n(6493),a=n(3598),i=n(5861),u=n(9748),c={};var s=n(8311);class APILoader extends u.Component{"constructor"(e){if(super(e),this.isMountedOk=!1,this.state={"loaded":!!window.AMap},this.handleError=e=>{this.isMountedOk&&this.setState({"error":e})},this.finish=()=>{this.isMountedOk&&this.setState({"loaded":!0})},null===e.akay)throw new TypeError("AMap: akay is required")}"componentDidMount"(){this.isMountedOk=!0;var{"callbackName":e}=this.props;if(null==window.AMap){if(window[e])return void APILoader.waitQueue.push([this.finish,this.handleError]);this.loadMap()}}"componentWillUnmount"(){this.isMountedOk=!1}"render"(){return this.props.disableScripts||this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?(0,s.tZ)("div",{"style":{"color":"red"},"children":this.state.error.message}):null}"getScriptSrc"(){var e=this.props,t=e.protocol||window.location.protocol;-1===t.indexOf(":")&&(t+=":");var n="";return e.plugin&&(n="&plugin="+e.plugin),t+"//"+e.hostAndPath+"?v="+e.version+"&key="+e.akay+"&callback="+e.callbackName+n}"loadMap"(){var e=this;return(0,i.Z)((function*(){var{"callbackName":t}=e.props,n=e.getScriptSrc();window[t]=()=>{var t=APILoader.waitQueue;APILoader.waitQueue=[],t.forEach((e=>e[0]())),e.finish()};for(var r=function*_loop(){try{return yield function requireScript(e,t){void 0===t&&(t="_react_amap_plugin");var n=document&&(document.head||document.getElementsByTagName("head")[0]),r=document.getElementById(t);return new Promise(((o,a)=>{if(!document||e in c||r)o();else{var i=document.createElement("script");i.type="text/javascript",i.id=t,i.async=!0,i.defer=!0,i.src=e,i.onerror=t=>{n.removeChild(i),a(new URIError("The Script "+e+" is no accessible."))},i.onload=()=>{c[e]=!0,o()},n.appendChild(i)}}))}(n),"break"}catch(n){if(2===o){var t=new Error("Failed to load AMap: "+n.message),r=APILoader.waitQueue;return APILoader.waitQueue=[],r.forEach((e=>e[1](t))),e.handleError(t),{"v":void 0}}yield function delay(e){return new Promise(((t,n)=>{window.setTimeout(t,e)}))}(1e3*o)}},o=0;o<3;o++){var a=yield*r();if("break"===a)break;if("object"==typeof a)return a.v}}))()}}APILoader.defaultProps={"protocol":/^file:/.test(window.location.protocol)?"https":window.location.protocol,"akay":"","hostAndPath":"webapi.amap.com/maps","version":"2.0","callbackName":"load_amap_sdk","plugin":""},APILoader.waitQueue=[];var l=n(7462);function esm_useEventProperties(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r=n,o=t[r];(0,u.useEffect)((()=>{if(e){var t=n.toLocaleLowerCase().replace(/^on/,"");return o&&t&&e.on(t,o),()=>{t&&o&&e.off(t,o)}}}),[e,t[r]])}))}function esm_useSettingProperties(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r="set"+n,o=""+n.charAt(0).toLowerCase()+n.slice(1),[a,i]=(0,u.useState)(t[o]);(0,u.useEffect)((()=>{e&&void 0!==t[o]&&t[o]!==a&&e[r]&&"function"==typeof e[r]&&(e[r](t[o]),i(t[o]))}),[e,t[o]])}))}var d=n(3366);var f={"map":void 0,"AMap":void 0,"container":void 0},context_reducer=(e,t)=>(0,l.Z)({},e,t),p=u.default.createContext({"state":f,"dispatch":()=>null});function context_useMapContext(){var{"state":e,"dispatch":t}=(0,u.useContext)(p);return(0,l.Z)({},e,{"state":e,"dispatch":t})}var v=function useMap(e){void 0===e&&(e={});var t=(0,l.Z)({},(function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[n,r]=(0,u.useState)(),[o,a]=(0,u.useState)(e.zoom||15),[i,c]=(0,u.useState)(e.container),{"dispatch":s}=(0,u.useContext)(p);return(0,u.useEffect)((()=>{if(i&&!n&&AMap){i.className=i.className+" react-amap-wapper";var e=new AMap.Map(i,(0,l.Z)({"zoom":o},t));r(e)}return()=>{n&&(n.clearInfoWindow(),n.clearLimitBounds(),n.clearMap(),n.destroy(),r(void 0))}}),[i,n]),(0,u.useEffect)((()=>(n&&i&&s({"map":n,"container":i,"AMap":AMap}),()=>{s({"map":void 0,"container":void 0,"AMap":void 0})})),[n,i]),(0,u.useMemo)((()=>{n&&"number"==typeof e.zoom&&o!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(a(e.zoom),n.setZoom(e.zoom))}),[o,e.zoom]),(0,u.useMemo)((()=>{e.center&&n&&n.setCenter(e.center)}),[n,e.center]),function useSetStatus(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r=n,[o,a]=(0,u.useState)(t[r]);(0,u.useEffect)((()=>{if(e&&void 0!==t[r]&&t[r]!==o){var n=e.getStatus();e.setStatus((0,l.Z)({},n,{[r]:t[r]})),a(t[r])}}),[e,t[r]])}))}(n,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),esm_useSettingProperties(n,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),esm_useEventProperties(n,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{"map":n,"setMap":r,"zoom":o,"setZoom":a,"container":i,"setContainer":c}},m=["className","children"],h=(0,u.forwardRef)(((e,t)=>{var{"className":n,"children":r}=e,o=(0,d.Z)(e,m),[a,i]=(0,u.useReducer)(context_reducer,f),c=(0,u.useRef)(null),{"setContainer":h,"container":M,"map":E}=v((0,l.Z)({"container":o.container||c.current},o));(0,u.useEffect)((()=>h(c.current)),[c.current]),(0,u.useImperativeHandle)(t,(()=>(0,l.Z)({},o,{"map":E,"AMap":AMap,"container":o.container||c.current})),[E]);var g=u.Children.toArray(r);return(0,u.useEffect)((()=>{E&&i({"map":E,"container":c.current,"AMap":AMap})}),[E]),(0,s.BX)(p.Provider,{"value":(0,l.Z)({},a,{"state":a,"dispatch":i}),"children":[!o.container&&(0,s.tZ)("div",{"ref":c,"className":"react-amap-wapper "+n,"style":(0,l.Z)({"fontSize":1,"width":"100%","height":"100%"},o.style)}),AMap&&E&&"function"==typeof r&&r({"AMap":AMap,"map":E,"container":M}),AMap&&E&&g.map(((e,t)=>(0,u.isValidElement)(e)?"string"==typeof e?(0,u.cloneElement)((0,s.tZ)(u.Fragment,{"children":e}),{"key":t}):e.type&&"string"==typeof e.type?(0,u.cloneElement)(e,{"key":t}):(0,u.cloneElement)(e,(0,l.Z)({},e.props,{"AMap":AMap,"map":E,"container":M,"key":t})):null))]})})),M=["position"],E=function noop(){};u.default.forwardRef(((e,t)=>{var{"contextMenu":n}=function useContextMenu(e){void 0===e&&(e={});var{"position":t}=e,n=(0,d.Z)(e,M),{"map":r}=context_useMapContext(),[o,a]=(0,u.useState)();return(0,u.useEffect)((()=>{if(AMap&&r&&!o){var e=new AMap.ContextMenu((0,l.Z)({},n));a(e);var rightclick=n=>e.open(r,t||n.lnglat);return r.on("rightclick",rightclick),()=>{e&&(e.close(),r.off("rightclick",rightclick),a(void 0))}}}),[r]),esm_useEventProperties(o,e,["onOpen","onClose"]),{"contextMenu":o,"setContextMenu":a}}(e);(0,u.useImperativeHandle)(t,(()=>(0,l.Z)({},e,{"contextMenu":n})));var r=u.default.Children.toArray(e.children);return(0,s.tZ)(u.Fragment,{"children":AMap&&n&&r.map(((t,r)=>u.default.isValidElement(t)?u.default.cloneElement(t,(0,l.Z)({},t.props,{"AMap":AMap,"map":e.map,"contextMenu":n,"key":r})):null))})})).Item=function(e){void 0===e&&(e={});var{"text":t="","onClick":n=E}=e;return(0,u.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(t,n,1),()=>{e.contextMenu&&e.contextMenu.removeItem(t,n)})),[e.contextMenu,e.text,e.onClick]),null};var g=["visiable","children"],k=function useMarker(e){void 0===e&&(e={});var{"visiable":t}=e,n=(0,d.Z)(e,g),{"map":r}=context_useMapContext(),[o,a]=(0,u.useState)(),{"container":i,"Portal":c}=(()=>{var[e]=u.default.useState((()=>document.createElement("div"))),[t,n]=(0,u.useState)({"render":()=>null,"remove":()=>null}),r=u.default.useCallback((e=>({"render":t=>{var{"children":n}=t;return n?(0,u.createPortal)(n,e):null},"remove":e=>{e&&(0,u.unmountComponentAtNode)(e)}})),[]);return(0,u.useEffect)((()=>{e&&t.remove();var o=r(e);return n(o),()=>{o.remove(e)}}),[e]),{"Portal":t.render,"container":e}})();return(0,u.useEffect)((()=>{if(!o&&r){e.children&&(n.content=i);var t=new AMap.Marker((0,l.Z)({},n));r.add(t),a(t)}return()=>{o&&(o.setMap(null),a(void 0))}}),[r,o]),function esm_useVisiable(e,t){var[n,r]=(0,u.useState)(t);(0,u.useEffect)((()=>{e&&void 0!==t&&(t?e.show&&e.show():e.hide&&e.hide(),t!==n&&r(t))}),[e,t])}(o,t),esm_useSettingProperties(o,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),esm_useEventProperties(o,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{"marker":o,"setMarker":a,"MarkerPortal":c}},w=(0,u.forwardRef)(((e,t)=>{var{"marker":n,"MarkerPortal":r}=k(e);return(0,u.useImperativeHandle)(t,(()=>(0,l.Z)({},e,{"marker":n})),[n]),(0,s.tZ)(r,{"children":e.children})}));var y=n(8052),Z=function Map(e){var t=e.onMoveEnd,n=e.center,r=e.zoom,o=void 0===r?18:r,a=e.markers,i=(0,u.useRef)(),c=(0,u.useCallback)((function(){var e=i.current.map.getCenter();null==t||t({"center":[e.lng,e.lat]})}),[t]);return(0,s.tZ)(APILoader,{"akay":y.Bn.h5Key,"children":(0,s.tZ)(h,{"ref":i,"center":n,"zoom":o,"onDragEnd":c,"onZoomEnd":c,"onComplete":c,"style":{"position":"absolute","top":0,"bottom":0,"right":0,"left":0},"children":null==a?void 0:a.map((function(e){return(0,s.tZ)(w,{"position":[e.lng,e.lat]},""+e.lng+e.lat)}))})})};function LoadingExample(){var e=(0,u.useState)(void 0),t=(0,r.Z)(e,2),n=t[0];t[1];return(0,s.BX)(o.srY,{"children":[(0,s.tZ)(o.h4i,{"title":"Map"}),(0,s.tZ)(o.pfj,{"children":(0,s.tZ)(o.cv$,{"children":(0,s.tZ)(o.cv$.Item,{"title":"地图","children":(0,s.tZ)(a.G7,{"style":{"height":500},"children":(0,s.tZ)(Z,{"center":n})})})})})]})}},"6493":function(e,t,n){n.d(t,{"$nj":function(){return o.$n},"Amu":function(){return o.Am},"Ar2":function(){return r.Ar},"Cts":function(){return r.Ct},"Dzt":function(){return r.Dz},"Eep":function(){return r.Ee},"GRZ":function(){return r.GR},"HYy":function(){return r.HY},"HkY":function(){return r.Hk},"IIB":function(){return r.II},"Kye":function(){return r.Ky},"Mtg":function(){return r.Mt},"OK9":function(){return r.OK},"P4f":function(){return r.P4},"TaI":function(){return r.T},"V_t":function(){return o.V_},"Vp9":function(){return r.Vp},"X2j":function(){return r.X2},"XZJ":function(){return r.XZ},"Y8K":function(){return r.Y8},"Yr8":function(){return r.Yr},"Zbd":function(){return r.Zb},"av6":function(){return r.av},"bLd":function(){return r.bL},"cZi":function(){return r.cZ},"cv$":function(){return r.cv},"e2B":function(){return r.e2},"f7S":function(){return r.f7},"gbz":function(){return r.gb},"gxH":function(){return r.gx},"h4i":function(){return r.h4},"h8e":function(){return r.h8},"iGu":function(){return o.iG},"iLi":function(){return r.iL},"izJ":function(){return r.iz},"kqE":function(){return r.kq},"l09":function(){return r.l0},"lZO":function(){return r.lZ},"mBz":function(){return r.mB},"njP":function(){return o.nj},"oas":function(){return r.o},"p8N":function(){return r.p8},"pfj":function(){return r.pf},"qEK":function(){return r.qE},"rjZ":function(){return r.rj},"rsf":function(){return r.rs},"sgG":function(){return r.sg},"srY":function(){return r.sr},"u_l":function(){return r.u_},"urP":function(){return r.ur},"v2r":function(){return r.v2},"vbA":function(){return r.vb},"wEg":function(){return o.wE},"xvT":function(){return r.xv},"yX4":function(){return r.yX},"ywV":function(){return o.yw},"zv":function(){return r.zv},"zxk":function(){return r.zx}});var r=n(8483),o=n(1774)}}]);